<!-- ajc-ant script, not to be used from Ant commant line - see AntSpec -->
<project name="pr120473">

    <!-- using this we can debug the forked VM -->
    <property
        name="jdwp"
        value="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005"/>

    <target name="compile:javac">
        <!-- compile only javac compilable stuff, exclude the one that needs other dependencies -->
        <javac destdir="${aj.sandbox}" classpathref="aj.path"
            srcdir="${basedir}"
            includes="ataspectj/*"
            excludes="ataspectj/UnweavableTest.java"
            debug="true">
        </javac>
    </target>

    <target name="ltw">
        <java fork="yes" classname="ataspectj.AllLTWTests" failonerror="yes">
            <classpath refid="aj.path"/>
            <!-- use META-INF/aop.xml style -->
            <classpath path="ataspectj/pathentry"/>
            <jvmarg value="-javaagent:${aj.root}/lib/test/loadtime5.jar"/>
<!--            <jvmarg line="${jdwp}"/>-->
        </java>
    </target>

    <target name="ConcreteAsepectTest">
    	<copy file="aop.xml" todir="${aj.sandbox}/META-INF">
    	</copy>
        <java fork="yes" classname="Hello" failonerror="yes">
            <classpath refid="aj.path"/>
            <jvmarg value="-javaagent:${aj.root}/lib/test/loadtime5.jar"/>
<!--        	
            <jvmarg value="-Daj5.def=aop.xml"/>
            <jvmarg value="-Daj.weaving.verbose=true"/>
-->            
<!--            <jvmarg line="${jdwp}"/>            -->
        </java>
    </target>

</project>
