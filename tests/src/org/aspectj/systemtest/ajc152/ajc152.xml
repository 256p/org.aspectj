<!DOCTYPE suite SYSTEM "../tests/ajcTestSuite.dtd"[]>

<!-- AspectJ v1.5.2 Tests -->
<suite>

    <ajc-test dir="bugs152/pr135001" title="aspect libraries and asm">
      <compile files="AbstractAspect.java" outjar="lib.jar" options="-1.5"/>
      <compile files="Foo.java,ConcreteAspect.java" classpath="lib.jar" options="-1.5 -showWeaveInfo">
        <message kind="weave" text="Join point 'method-call(void Foo.foo())' in Type 'Foo' (Foo.java:3) advised by around advice from 'ConcreteAspect' (AbstractAspect.java:5)"/>
      </compile>
      <run class="Foo">
         <stderr>
           <line text="In the advice!"/>
         </stderr>
      </run>
    </ajc-test>
    
    <ajc-test dir="bugs152/pr136258" title="stack overflow">
      <compile files="StatisticsTypeImpl.java" options="-1.5"/>
      <run class="StatisticsTypeImpl"/>
    </ajc-test>
    
    <ajc-test dir="bugs152/binaryDecp" title="incorrect overrides evaluation - 1.3">
      <compile files="SubClassLoader.java,SubSubClassLoader.java" options="-1.3" outjar="lib.jar"/>
      <compile files="X.aj" inpath="lib.jar" options="-showWeaveInfo">
        <message kind="weave" text="Setting superclass of type 'SubSubClassLoader' (SubSubClassLoader.java) to 'SubClassLoader' (X.aj)"/>
      </compile>
    </ajc-test>
    
    <ajc-test dir="bugs152/binaryDecp" title="incorrect overrides evaluation - 1.5">
      <compile files="SubClassLoader.java,SubSubClassLoader.java" options="-1.5" outjar="lib.jar"/>
      <compile files="X.aj" inpath="lib.jar" options="-showWeaveInfo">
        <message kind="weave" text="Setting superclass of type 'SubSubClassLoader' (SubSubClassLoader.java) to 'SubClassLoader' (X.aj)"/>
      </compile>
    </ajc-test>
    
</suite>