<!DOCTYPE suite SYSTEM "../tests/ajcTestSuite.dtd"[]>

<!-- AspectJ v1.6.2 Tests -->
<suite>

    <ajc-test dir="bugs162/pr241047" title="generic decp">
        <compile files="SomeAspect.java SomeBaseClass.java SomeSubClass.java SomeSubClass2.java SomeSubClass3.java SomeInterface.java SomeBaseClass2.java SomeBaseClass3.java" options=" -Xlint:ignore -1.5">
        </compile>
        <run class="SomeBaseClass">
          <stdout>
              <line text="correct advice :-)"/>
              <line text="some base method"/>
              <line text="correct advice :-)"/>
              <line text="some sub method"/>
              <line text="correct advice :-)"/>
              <line text="some base method2"/>
              <line text="correct advice :-)"/>
              <line text="some sub method2"/>
              <line text="correct advice :-)"/>
              <line text="some base method3"/>
              <line text="correct advice :-)"/>
              <line text="some sub method3"/>
          </stdout>
        </run>
    </ajc-test> 

    <ajc-test dir="bugs162/pr241047/case2" title="generic decp - 2">
        <compile files="SomeAspect.java SomeSubClass.java SomeInterface.java SomeBaseClass.java" options=" -Xlint:ignore -1.5">
        </compile>
        <run class="SomeBaseClass">
          <stdout>
              <line text="correct advice :-)"/>
              <line text="some base method"/>
              <line text="correct advice :-)"/>
              <line text="some sub method"/>
          </stdout>
        </run>
    </ajc-test> 


    <ajc-test dir="bugs162/pr242797/case1" title="generic itds - 1">
        <compile files="ClassUtils.java CMEFinder.java Finder.java H2Deployment.java Localized.java LocalizedFinder.java OnetElement.java OnetFinder.java Partitioned.java PartitionedFinder.java" options="-1.5">
        </compile>
    </ajc-test> 
    
    <ajc-test dir="bugs162/pr242797/case2" title="generic itds - 2">
        <compile files="GenericMethodAspect.aj GenericMethodInterface.java GenericMethodImpl.java" options="-1.5">
        </compile>
    </ajc-test> 

    <ajc-test dir="bugs162/pr242797/case3" title="generic itds - 3">
        <compile files="GenericMethodAspect.aj GenericMethodInterface.java GenericMethodImpl.java GenericMethodImpl2.java Type1.java Type2.java" options="-1.5">
        </compile>
    </ajc-test> 
 
  	<ajc-test dir="bugs162/pr241847" title="param annos pipelining">
    	<compile files="Asp.aj Ann.java CC.java II.java LongLong.java" options="-1.5 -showWeaveInfo">
    		<message kind="weave" text="Join point 'method-execution(void LongLong.m1(java.lang.String))' in Type 'LongLong' (LongLong.java:2) advised by before advice from 'Asp' (Asp.aj:5)"/>
    		<message kind="weave" line="3"/>
    	</compile>
    </ajc-test>    
    
	<ajc-test dir="bugs162/pr239441" title="annotation decp">
    	<compile files="Test3.java SampleAspect.java" options="-1.5 -showWeaveInfo -XhasMember">
    	</compile>
    </ajc-test>    

    <ajc-test dir="bugs162/pr241861" title="param annotation inner class">
        <compile files="Outer.java Ann.java Asp.java" options="-1.5">
        </compile>
    </ajc-test>    
    
	<ajc-test dir="bugs162/pr238992" title="annotation value decp">
    	<compile files="Foo.java" options="-1.5 -showWeaveInfo">
    	  <message kind="weave" text="Extending interface set for type 'Goo'"/>
    	</compile>
    	<run class="Foo"/>
    </ajc-test>    
    
	<ajc-test dir="bugs162/pr238992" title="annotation value decp - 2">
    	<compile files="Foo2.java" options="-1.5 -showWeaveInfo">
    	  <message kind="weave" text="Extending interface set for type 'Goo'"/>
    	  <message kind="weave" text="Extending interface set for type 'Hoo'"/>
    	</compile>
    	<run class="Foo2"/>
    </ajc-test>    
    
	<ajc-test dir="bugs162/pr238992" title="annotation value decp - 3">
    	<compile files="Foo3.java" options="-1.5 -showWeaveInfo">
    	  <message kind="weave" text="Extending interface set for type 'Goo'"/>
    	</compile>
    	<run class="Foo3"/>
    </ajc-test>    
    
	<ajc-test dir="bugs162/pr238992" title="annotation value decp - 4">
    	<compile files="Foo4.java" options="-1.5 -showWeaveInfo">
    	  <message kind="weave" text="Extending interface set for type 'Goo'"/>
    	  <message kind="weave" text="Extending interface set for type 'Hoo'"/>
    	</compile>
    	<run class="Foo4"/>
    </ajc-test>    
    
	<ajc-test dir="bugs162/pr238992" title="annotation value decp - 5">
    	<compile files="Foo5.java" options="-1.5 -showWeaveInfo">
    	  <message kind="weave" text="Extending interface set for type 'Goo'"/>
    	  <message kind="weave" text="Extending interface set for type 'Hoo'"/>
    	</compile>
    	<run class="Foo5"/>
    </ajc-test>    
    
    <ajc-test dir="bugs162/pr233718" title="parameter subsetting - matching">
        <compile files="Matching.java" options="-1.5 -showWeaveInfo">
          <message kind="weave" text="Join point 'method-execution(void Matching.m(java.lang.String))' in Type 'Matching' (Matching.java:3) advised by before advice from 'Matching' (Matching.java:8)"/>
          <message kind="weave" text="'method-execution(void Matching.m(java.lang.String, java.lang.String))' in Type 'Matching' (Matching.java:4) advised by before advice from 'Matching' (Matching.java:8)"/>
          <message kind="weave" text="'method-execution(void Matching.m(int, java.lang.String))' in Type 'Matching' (Matching.java:5) advised by before advice from 'Matching' (Matching.java:8)"/>        
        </compile>
    </ajc-test>    

    <ajc-test dir="bugs162/pr233718" title="parameter subsetting - args matching">
        <compile files="ArgsMatching.java" options="-1.5 -showWeaveInfo">
 <!--
          <message kind="weave" text="Join point 'method-execution(void Matching.m(java.lang.String))' in Type 'Matching' (Matching.java:3) advised by before advice from 'Matching' (Matching.java:8)"/>
          <message kind="weave" text="'method-execution(void Matching.m(java.lang.String, java.lang.String))' in Type 'Matching' (Matching.java:4) advised by before advice from 'Matching' (Matching.java:8)"/>
          <message kind="weave" text="'method-execution(void Matching.m(int, java.lang.String))' in Type 'Matching' (Matching.java:5) advised by before advice from 'Matching' (Matching.java:8)"/>        
 -->
        </compile>
    </ajc-test>    
    
    <ajc-test dir="bugs162/pr233718" title="parameter subsetting - args binding">
        <compile files="ArgsBinding.java" options="-1.5"/>
        <run class="ArgsBinding">
          <stdout>
            <line text="0) a"/>
            <line text="0) b"/>
          </stdout>
        </run>
    </ajc-test>    
    
    <ajc-test dir="bugs162/pr198181" title="ataspectj ltw pertarget">
      <compile files="M.java" outjar="code.jar"/>
      <compile files="A.java" classpath="code.jar" options="-1.5 -Xlint:ignore"/>
      <run class="m.M" classpath="$sandbox/code.jar" ltw="aop.xml">
        <stdout>
          <line text="tick 0"/>
          <line text="tick 0"/>
          <line text="tick 0"/>
        </stdout>
      </run>
    </ajc-test>

</suite>