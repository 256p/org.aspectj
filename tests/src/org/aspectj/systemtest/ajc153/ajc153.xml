<!DOCTYPE suite SYSTEM "../tests/ajcTestSuite.dtd"[]>

<!-- AspectJ v1.5.3 Tests -->
<suite>

    <ajc-test dir="bugs153/pr148381" title="argNames and javac">
      <!--compile files="C.java" options="-1.5"/>
      <compile files="A.java" options="-1.5"/-->
      <compile files="Main.java,Monitor.java" options="-1.5" outjar="foo.jar" classpath="code.jar"/>
      <run class="test.Main" classpath="$sandbox/code.jar" ltw="aop.xml">
        <stderr>
          <line text="goo"/>
 	    </stderr>
      </run>
    </ajc-test>
    
    <ajc-test dir="bugs153/pr148737" title="illegalstateexception for non generic type">
      <compile files="A.java" options="-source 5 -target 5">
        <message kind="warning" line="18" text="advice defined in TestAspect has not been applied"/>
      </compile>
    </ajc-test>
         
    <ajc-test dir="bugs153/pr149096" title="cflow xml concrete aspect">
		<compile files="SimpleTracing.aj" outjar="out.jar"/>
		<compile files="TestMain.aj"/>
		<run class="TestMain" ltw="aop-pr149096.xml"/>
    </ajc-test>
    
    <ajc-test dir="bugs153/pr149305/case1" title="ataj inheritance - 1">
		<compile files="AbstractOzonator.java,IdentityOzonator.java,User.java" options="-1.5"/>
    </ajc-test>
    
    <ajc-test dir="bugs153/pr149305/case2" title="ataj inheritance - 2">
		<compile files="com/codesrc/ozonator/identity/IdentityOzonator.java,com/codesrc/ozonator/identity/User.java,com/codesrc/ozonator/AbstractOzonator.java" options="-1.5"/>
    </ajc-test>
    
    <ajc-test dir="bugs153/pr149305/case2" title="ataj inheritance - 3">
		<compile files="com/codesrc/ozonator/AbstractOzonator.java,com/codesrc/ozonator/identity/IdentityOzonator.java,com/codesrc/ozonator/identity/User.java" options="-1.5"/>
    </ajc-test>
    
    <ajc-test dir="bugs153/pr148693" title="verification problem">
		<compile files="MyAspect.java" options="-1.5 -XterminateAfterCompilation=true"/>
    </ajc-test>
    
    <ajc-test dir="bugs153/pr148537" title="incorrect annotation value">
		<compile files="MyClass.java" options="-1.5">
		  <message kind="error" line="5" text="Type mismatch: cannot convert from RetentionPolicy[] to RetentionPolicy"/>
		</compile>
    </ajc-test>
    
    <ajc-test dir="bugs153/pr145693" title="verifyErrNoTypeCflowField">
      <compile files="Event.java" outjar="cpath.jar"/>
      <compile files="Monitor.aj" outjar="apath.jar" classpath="cpath.jar"/>
      <compile files="Sample.java" options="-Xlint:ignore" aspectpath="apath.jar" outjar="run.jar">
        <message kind="warning" line="8" text="Unable to determine match at this join point because the type 'Event' cannot be found"/>
      </compile>
      <run class="Sample" classpath="run.jar,apath.jar">
        <stderr>
          <line text="method running"/>
        </stderr>
      </run>
    </ajc-test>    

    <ajc-test dir="bugs153/pr145693" title="verifyErrInpathNoTypeCflowField">
      <compile files="Event.java" outjar="cpath.jar"/>
      <compile files="Monitor.aj" outjar="apath.jar" classpath="cpath.jar"/>
      <compile files="Sample.java" options="-Xlint:ignore" inpath="cpath.jar" aspectpath="apath.jar" outjar="run.jar"/>
      <run class="Sample" classpath="run.jar,apath.jar"/>
    </ajc-test>    

    <ajc-test dir="bugs153/pr145693" title="cpathNoTypeCflowField">
      <compile files="Event.java" outjar="cpath.jar"/>
      <compile files="Monitor.aj" outjar="apath.jar" classpath="cpath.jar"/>
      <compile files="Sample.java" options="-Xlint:ignore" classpath="cpath.jar" aspectpath="apath.jar" outjar="run.jar"/>
      <run class="Sample" classpath="run.jar,apath.jar"/>
    </ajc-test>    
    
    <ajc-test dir="bugs153/pr149071" title="visibility problem">
      <compile files="AspectItd.java"/>
    </ajc-test>    
    
    <ajc-test dir="bugs153/pr147841" title="advice not woven on aspectpath">
      <compile files="A.java" options="-Xlint:ignore" outjar="apath.jar"/>
      <!--compile files="C.java" outjar="cpa.jar" classpath="cpath.jar"/-->
      <compile files="C.java" options="-showWeaveInfo" aspectpath="apath.jar">
        <message kind="weave" text="foo"/>
      </compile>
      <run class="C">
        <stderr>
          <line text="foo"/>
        </stderr>
      </run>
    </ajc-test>    
    
</suite>